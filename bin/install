#!/usr/bin/env bash

# This script installs a specific version of mvnd for asdf.
# It assumes the tarball has already been downloaded by the 'download' script.

set -euo pipefail

# asdf provides these environment variables:
# ASDF_INSTALL_PATH: The final installation directory.
# The first argument ($1) is the path to the downloaded file.
install_path="$ASDF_INSTALL_PATH"
download_path="$ASDF_DOWNLOAD_PATH"


echo "Installing mvnd from ${download_path} into ${install_path}"

# Create the installation directory.
mkdir -p "${install_path}"

# Extract the archive, stripping the top-level directory from the tarball.
tar -xzf "${download_path}" -C "${install_path}" --strip-components=1

echo "mvnd ${ASDF_INSTALL_VERSION} installed successfully."